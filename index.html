<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <title>ğŸ¯ Kuiz Sistem Ejaan</title>
  <style>
    body {
      font-family: "Comic Sans MS", sans-serif;
      background: linear-gradient(120deg, #74ebd5, #ACB6E5);
      background-size: 400% 400%;
      animation: gradientMove 10s ease infinite;
      margin: 0;
      padding: 0;
      color: #333;
      text-align: center;
      overflow-x: hidden;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 20px;
      width: 90%;
      max-width: 900px;
      margin: 40px auto;
      padding: 24px;
      box-shadow: 0px 4px 18px rgba(0,0,0,0.25);
      position: relative;
      z-index: 10;
    }

    h1 {
      color: #2b4c7e;
      margin-bottom: 8px;
    }

    #progress-container {
      width: 100%;
      background: #ddd;
      border-radius: 20px;
      margin: 14px 0;
      height: 18px;
      overflow: hidden;
    }

    #progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #00c6ff);
      width: 0%;
      border-radius: 20px;
      transition: width 0.4s ease;
    }

    .question {
      font-size: 20px;
      margin-bottom: 16px;
      animation: fadeIn 0.4s ease;
      min-height: 56px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }

    button {
      display: block;
      width: 88%;
      max-width: 420px;
      margin: 8px auto;
      padding: 12px;
      font-size: 17px;
      border-radius: 12px;
      border: none;
      background: #4CAF50;
      color: white;
      cursor: pointer;
      transition: 0.2s;
    }

    button:hover {
      transform: scale(1.03);
      background: #3e9144;
    }

    #nextBtn { background: #008CBA; }
    #nextBtn:hover { background: #0077aa; }

    .option-btn {
      text-align: left;
      padding-left: 20px;
    }

    #avatar {
      width: 70px;
      margin: 10px auto;
      transition: transform 0.3s ease;
    }

    .happy { content: url('https://cdn-icons-png.flaticon.com/512/742/742751.png'); }
    .sad { content: url('https://cdn-icons-png.flaticon.com/512/742/742761.png'); }
    .smile { content: url('https://img.favpng.com/9/1/12/emoji-thumb-signal-emoticon-smiley-png-favpng-18fyyZ9vdD8PJFW0GzKjnQu6P.jpg'); }

    #score {
      font-size: 20px;
      font-weight: bold;
      margin-top: 14px;
    }

    #starContainer span {
      font-size: 28px;
      color: gold;
      animation: pop 0.6s ease;
    }

    @keyframes pop {
      0% { transform: scale(0); opacity: 0; }
      50% { transform: scale(1.3); opacity: 1; }
      100% { transform: scale(1); }
    }

    #wrongAnswers {
      text-align: left;
      font-size: 16px;
      margin-top: 18px;
      background: rgba(255,255,255,0.96);
      padding: 12px;
      border-radius: 10px;
      display: none;
      max-height: 420px;
      overflow: auto;
      box-shadow: inset 0 0 6px rgba(0,0,0,0.05);
    }

    .result-row {
      border-bottom: 1px dashed #e0e0e0;
      padding: 10px 6px;
      margin-bottom: 6px;
    }

    .result-row:last-child { border-bottom: none; margin-bottom: 0; }

    .status-ok { color: #0a9b3a; font-weight: bold; }
    .status-wrong { color: #c62828; font-weight: bold; }

    .small-label { font-size: 14px; color: #555; }

    table.results-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 15px;
    }

    table.results-table th, table.results-table td {
      border: 1px solid #e6e6e6;
      padding: 8px;
      vertical-align: top;
    }

    table.results-table th {
      background: #f7fbff;
      color: #2b4c7e;
      text-align: left;
    }

    .controls { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin-top:14px; }

    input[type="text"]#playerName {
      padding:10px; width:70%; border-radius:10px; border:1px solid #ccc; font-size:16px;
    }

    @media (max-width:600px) {
      button { width: 94%; }
      .container { width: 95%; padding: 18px; margin: 20px auto; }
    }
  </style>
</head>
<body>
  <div class="container" id="start-container">
    <h1>ğŸ¯ Kuiz Sistem Ejaan</h1>
    <p>Sila masukkan nama anda untuk mula</p>
    <input type="text" id="playerName" placeholder="Masukkan nama anda">
    <div class="controls">
      <button onclick="startQuiz()">ğŸš€ Mula Kuiz</button>
    </div>
  </div>

  <div class="container" id="quiz-container" style="display:none;">
    <h1 id="quizTitle">Soalan <span id="currentQ">1</span> / 30</h1>
    <div id="progress-container"><div id="progress-bar"></div></div>
    <img id="avatar" class="happy" alt="avatar">
    <div class="question" id="question"></div>
    <div id="options"></div>
    <div id="starContainer"></div>
    <button id="nextBtn" onclick="nextQuestion()">â¡ï¸ Seterusnya</button>
    <div id="score"></div>

    <!-- ç»“æœåŒºï¼šæ‰€æœ‰é¢˜ç›®çš„å¯¹é”™æ˜¾ç¤ºè¡¨ -->
    <div id="wrongAnswers"></div>

    <!-- ä¸‰ä¸ªç»“å°¾æŒ‰é’® -->
    <div id="endButtons" style="display:none; margin-top:12px;">
      <div class="controls" style="margin-top:6px;">
        <button onclick="showAllAnswers()">ğŸ” Semak Jawapan</button>
        <button onclick="restartQuiz()">ğŸ”„ Main Semula Kuiz</button>
        <button onclick="exitQuiz()">ğŸšª Keluar</button>
      </div>
    </div>
  </div>

  <script>
    // å®Œæ•´åŸå§‹ 30 é¢˜ï¼ˆæŒ‰ä½ åŸæœ¬æä¾›çš„å†…å®¹ï¼‰
    const quizData = [
      { q: "1. Manakah ejaan yang betul?", options: ["A. Sekolah-ku", "B. Sekolah ku", "C. Sekolahku", "D. Sekolah@ku"], correct: 2 },
      { q: "2. Ayat manakah tiada kesalahan ejaan?", options: ["A. Saya sedang bemain di padang.", "B. Ali berjogging setiap hari.", "C. Ibu suka makan mee goreng.", "D. Adik saya lahir pada bulan Februari."], correct: 3 },
      { q: "3. Pilih perkataan yang dieja dengan salah.", options: ["A. pergerakan", "B. garfu", "C. bekerjasama", "D. pasar raya"], correct: 1 },
      { q: "4. Manakah ejaan yang betul bagi perkataan berikut?", options: ["A. cantik", "B. chantek", "C. chantik", "D. cantek"], correct: 0 },
      { q: "5. Manakah ejaan yang salah?", options: ["A. serba guna", "B. tomyam", "C. ibu bapa", "D. isipadu"], correct: 3 },
      { q: "6. Perkataan manakah yang dieja dengan tepat?", options: ["A. teknoloji", "B. stesen", "C. professional", "D. patriotisma"], correct: 1 },
      { q: "7. Pilih perkataan yang dieja dengan betul.", options: ["A. diubahsuai", "B. mengubah suaikan", "C. pengubahsuaian", "D. ubahsuaian"], correct: 2 },
      { q: "8. Kata majmuk mantap yang betul ialah...", options: ["A. kereta api", "B. tengah hari", "C. jalan raya", "D. setiausaha"], correct: 3 },
      { q: "9. Ayat manakah mempunyai kesalahan ejaan?", options: ["A. Saya akan pergi kesana nanti.", "B. Ali berada di padang sekolah tadi.", "C. Abu telah menjadi ketua kumpulan ini.", "D. Kek ini dimakan oleh Ahmad."], correct: 0 },
      { q: "10. Manakah merupakan kata ganda yang betul bagi perkataan berikut?", options: ["A. guru besar-guru besar", "B. guru-guru besar", "C. guru besar-besar", "D. guru besar"], correct: 1 },
      { q: "11. Makanan kedai ini _____ (adalah/ialah) sangat enak!", options: ["adalah", "ialah"], correct: 0 },
      { q: "12. Lelaki yang sedang berlari itu _____ (adalah/ialah) abang saya.", options: ["adalah", "ialah"], correct: 1 },
      { q: "13. Kereta api itu _____ (tidak/bukan) dari Ipoh.", options: ["tidak", "bukan"], correct: 1 },
      { q: "14. Encik Omar _____ (tidak/bukan) berniaga pada hari ini.", options: ["tidak", "bukan"], correct: 0 },
      { q: "15. Kerusi ini diperbuat _____ (dari/daripada) kayu jati.", options: ["dari", "daripada"], correct: 1 },
      { q: "16. Cikgu Aiman berasal _____ (dari/daripada) Kluang, Johor.", options: ["dari", "daripada"], correct: 0 },
      { q: "17. Saya dan Muthu berada _____ (di/pada) perpustakaan tadi.", options: ["di", "pada"], correct: 0 },
      { q: "18. Majlis akan bermula _____ (di/pada) jam 10 pagi.", options: ["di", "pada"], correct: 1 },
      { q: "19. Saya akan pergi _____ (ke/kepada) perpustakaan untuk mengulang kaji.", options: ["ke", "kepada"], correct: 0 },
      { q: "20. Fail ini perlu dihantar _____ (ke/kepada) Encik Shafiq.", options: ["ke", "kepada"], correct: 1 },
      { q: "21. Manakah yang mempunyai kesalahan?", options: ["A. dua jam setengah", "B. oleh sebab", "C. kedua adiknya", "D. semua pelajar"], correct: 2 },
      { q: "22. Pilih jawapan yang tiada kesalahan.", options: ["A. mereka-mereka", "B. setengah-tengah", "C. Pelbagai buku-buku", "D. Berpuluh-puluh orang"], correct: 3 },
      { q: "23. Manakah yang tiada kesalahan?", options: ["A. cili sos", "B. goreng pisang", "C. penghawa dingin", "D. hal-hal lain"], correct: 3 },
      { q: "24. Ayat manakah yang betul?", options: ["A. Ikan itu ditangkap oleh nelayan.", "B. Ikan itu ditangkap oleh saya.", "C. Ikan itu ditangkap oleh kamu.", "D. Ikan itu nelayan menangkap."], correct: 0 },
      { q: "25. Pilih jawapan yang betul.", options: ["A. mengirimi surat", "B. menghadiahi ibu", "C. tertinggi sekali", "D. benar rendah"], correct: 1 },
      { q: "26. Ayat manakah yang tidak betul?", options: ["A. Buku itu telah saya dibaca.", "B. Buku itu telah dibaca oleh Aiman.", "C. Buku itu telah saya baca.", "D. Buku itu telah kamu baca."], correct: 0 },
      { q: "27. Ayat manakah tiada kesalahan?", options: ["A. Karangan ini di tulis oleh Ah Meng.", "B. Jason terjatuh di atas lantai tadi.", "C. Saya mendapat nombor ke lima dalam pertandingan melukis.", "D. Abu ter jumpa ibunya di pasar raya."], correct: 1 },
      { q: "28. Manakah yang tidak betul?", options: ["A. oleh kerana", "B. pada masa hadapan", "C. bas mini", "D. klinik Dr. Mariam"], correct: 0 },
      { q: "29. Ayat manakah yang salah?", options: ["A. Lukisan ini terdapat berbagai-bagai warna.", "B. Saya tidak suka makan sayur.", "C. Kuala Lumpur adalah ibu negara Malaysia.", "D. Wahai, pemandangan itu amat indah sekali!"], correct: 2 },
      { q: "30. Pilih ayat yang betul.", options: ["A. Banyak kedai-kedai telah ditutup.", "B. Wah, bangunan itu sangat tertinggi!", "C. Saya telah memulangkan buku Ali kepada-nya.", "D. Sekolah ini terdapat ribuan pelajar."], correct: 3 }
    ];

    let currentQuestion = 0;
    let score = 0;
    let playerName = '';
    // userAnswers will keep one entry per question: { selected: number|null, correct: number, options: [...], question: string }
    let userAnswers = new Array(quizData.length).fill(null);

    const questionEl = document.getElementById('question');
    const optionsEl = document.getElementById('options');
    const scoreEl = document.getElementById('score');
    const nextBtn = document.getElementById('nextBtn');
    const avatar = document.getElementById('avatar');
    const starContainer = document.getElementById('starContainer');
    const currentQ = document.getElementById('currentQ');
    const progressBar = document.getElementById('progress-bar');
    const endButtons = document.getElementById('endButtons');
    const wrongAnswersDiv = document.getElementById('wrongAnswers');

    const correctSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-game-level-completed-2059.mp3");
    const wrongSound = new Audio("https://assets.mixkit.co/sfx/preview/mixkit-player-losing-or-failing-2042.mp3");

    function startQuiz() {
      playerName = document.getElementById('playerName').value.trim();
      if (playerName === '') return alert("Masukkan nama anda dahulu!");
      document.getElementById('start-container').style.display = 'none';
      document.getElementById('quiz-container').style.display = 'block';
      // reset state
      currentQuestion = 0;
      score = 0;
      userAnswers = new Array(quizData.length).fill(null);
      starContainer.innerHTML = '';
      scoreEl.innerHTML = '';
      endButtons.style.display = 'none';
      wrongAnswersDiv.style.display = 'none';
      loadQuestion();
    }

    function loadQuestion() {
      const q = quizData[currentQuestion];
      questionEl.textContent = q.q;
      optionsEl.innerHTML = '';
      avatar.className = 'happy';
      currentQ.textContent = currentQuestion + 1;
      progressBar.style.width = ((currentQuestion) / quizData.length) * 100 + "%";

      q.options.forEach((opt, i) => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(i);
        optionsEl.appendChild(btn);
      });
      nextBtn.style.display = 'none';
    }

    function checkAnswer(selected) {
      const q = quizData[currentQuestion];
      const buttons = optionsEl.querySelectorAll('button');
      buttons.forEach((btn, i) => {
        btn.disabled = true;
        if (i === q.correct) btn.style.background = '#4CAF50';
        else if (i === selected) btn.style.background = '#f44336';
      });

      // store answer for this question (overwrite if re-answering)
      userAnswers[currentQuestion] = {
        question: q.q,
        selected: selected,
        correct: q.correct,
        options: q.options
      };

      if (selected === q.correct) {
        score++;
        try { correctSound.play(); } catch(e) {}
        avatar.className = 'smile';
        // add a star for correct
        const star = document.createElement('span');
        star.innerHTML = 'â­';
        starContainer.appendChild(star);
      } else {
        try { wrongSound.play(); } catch(e) {}
        avatar.className = 'sad';
      }
      nextBtn.style.display = 'block';
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < quizData.length) {
        loadQuestion();
      } else {
        showScore();
      }
    }

    function showScore() {
      document.getElementById('quizTitle').style.display = 'none';
      questionEl.innerHTML = `ğŸ‰ Tahniah, ${playerName}! Anda telah menamatkan kuiz ini.`;
      optionsEl.innerHTML = '';
      nextBtn.style.display = 'none';
      progressBar.style.width = "100%";
      let rank = score >= 25 ? "ğŸ† Mantap, Anda Memang Terbaik!" :
                 score >= 15 ? "âœ¨ Bagus, Teruskan Usaha Anda Lagi!" :
                 "ğŸ˜º Banyakkan Latihan Anda!";
      scoreEl.innerHTML = `Markah akhir anda ialah <b>${score} / ${quizData.length}</b><br>${rank}`;
      endButtons.style.display = 'block';
      // ensure any unanswered questions are recorded as null entries (already are)
    }

    // æ˜¾ç¤ºå…¨éƒ¨é¢˜ç›®ä¸ç­”é¢˜æƒ…å†µï¼ˆæ¯é¢˜éƒ½åˆ—å‡ºï¼Œè‹¥ç­”å¯¹æ˜¾ç¤º âœ… Betulï¼Œç­”é”™æ˜¾ç¤º âŒ Salahï¼Œå¹¶ç»™å‡ºæ­£ç¡®ç­”æ¡ˆï¼‰
    function showAllAnswers() {
      wrongAnswersDiv.style.display = 'block';
      // build table header
      let html = `<h3>ğŸ“ Keputusan - Semua Soalan</h3>`;
      html += `<table class="results-table"><thead><tr><th style="width:6%;">No.</th><th style="width:44%;">Soalan</th><th style="width:26%;">Jawapan Anda</th><th style="width:24%;">Jawapan Betul / Status</th></tr></thead><tbody>`;

      for (let i = 0; i < quizData.length; i++) {
        const q = quizData[i];
        const ans = userAnswers[i];
        const qText = q.q;
        let yourAnswerText = "(tidak menjawab)";
        let correctText = q.options[q.correct];
        let statusText = `<span class="status-wrong">âŒ Salah</span>`; // default

        if (ans && typeof ans.selected === 'number') {
          yourAnswerText = q.options[ans.selected] || "(pilihan tidak sah)";
          if (ans.selected === q.correct) {
            statusText = `<span class="status-ok">âœ… Betul</span>`;
          } else {
            // show correct + Salah
            statusText = `${correctText} â€” <span class="status-wrong">âŒ Salah</span>`;
          }
        } else {
          // not answered
          statusText = `${correctText} â€” <span class="status-wrong">(Tidak menjawab)</span>`;
        }

        // escape html in qText? we assume qText safe since it's static
        html += `<tr>
                  <td style="vertical-align:top;">${i+1}</td>
                  <td>${qText}</td>
                  <td>${yourAnswerText}</td>
                  <td>${statusText}</td>
                </tr>`;
      }

      html += `</tbody></table>`;
      // add a close/hide button
      html += `<div style="text-align:center; margin-top:10px;">
                <button onclick="hideAllAnswers()" style="width:200px; display:inline-block;">Tutup Keputusan</button>
               </div>`;

      wrongAnswersDiv.innerHTML = html;
      // scroll into view a bit
      wrongAnswersDiv.scrollIntoView({behavior: 'smooth'});
    }

    function hideAllAnswers() {
      wrongAnswersDiv.style.display = 'none';
    }

    function restartQuiz() {
      // Reset variables and UI to start state, but keep playerName
      currentQuestion = 0;
      score = 0;
      userAnswers = new Array(quizData.length).fill(null);
      starContainer.innerHTML = '';
      scoreEl.innerHTML = '';
      wrongAnswersDiv.style.display = 'none';
      endButtons.style.display = 'none';
      document.getElementById('quizTitle').style.display = 'block';
      document.getElementById('quiz-container').style.display = 'block';
      loadQuestion();
      // reset progress bar
      progressBar.style.width = "0%";
    }

    function exitQuiz() {
      // æ¸…ç†å¹¶å›åˆ°èµ·å§‹é¡µé¢ï¼ˆä¿ç•™è¾“å…¥åå­—ï¼‰
      document.getElementById('quiz-container').style.display = 'none';
      document.getElementById('start-container').style.display = 'block';
      // keep the name in input
      document.getElementById('playerName').value = playerName;
    }
  </script>
</body>
</html>
